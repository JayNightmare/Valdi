(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{6370:function(e,t,n){Promise.resolve().then(n.bind(n,977))},977:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r=n(7437),a=n(2265),o=n(6463),i=n(6164),s=n(4839);let l=(0,a.forwardRef)((e,t)=>{let{className:n,variant:a="primary",...o}=e;return(0,r.jsx)("button",{ref:t,className:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,i.m6)((0,s.W)(t))}("inline-flex items-center justify-center rounded-md px-4 py-2 text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{"bg-blue-600 text-white hover:bg-blue-700":"primary"===a,"bg-gray-100 text-gray-900 hover:bg-gray-200":"secondary"===a,"border border-gray-300 bg-transparent hover:bg-gray-100":"outline"===a},n),...o})});l.displayName="Button";let c=(0,a.forwardRef)((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("input",{ref:t,className:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,i.m6)((0,s.W)(t))}("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),...a})});c.displayName="Input";var d=n(2120);function u(){let[e,t]=(0,a.useState)(""),[n,i]=(0,a.useState)(!1),s=(0,o.useRouter)(),u=async t=>{t.preventDefault(),i(!0);try{let t=await d.h.login(e);localStorage.setItem("valdi_token",t.token),s.push("/dashboard")}catch(e){console.error("Login failed",e)}finally{i(!1)}};return(0,r.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50",children:(0,r.jsxs)("div",{className:"w-full max-w-md space-y-8 rounded-xl bg-white p-8 shadow-lg",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold tracking-tight text-gray-900",children:"Sign in to Valdi"}),(0,r.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Access your Kingston University timetable"})]}),(0,r.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:u,children:[(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"username",className:"sr-only",children:"Username"}),(0,r.jsx)(c,{id:"username",name:"username",type:"text",required:!0,placeholder:"Username / Student ID",value:e,onChange:e=>t(e.target.value)})]})}),(0,r.jsx)(l,{type:"submit",className:"w-full",disabled:n,children:n?"Signing in...":"Sign in"})]})]})})}},2120:function(e,t,n){"use strict";n.d(t,{h:function(){return l}});var r=n(9212),a=n.n(r);function o(e){let t=[],n="",r=!1;for(let a=0;a<e.length;a++){let o=e[a];'"'===o?r&&'"'===e[a+1]?(n+='"',a++):r=!r:","!==o||r?n+=o:(t.push(n),n="")}return t.push(n),t}let i=async e=>{try{let t=await fetch(e),n=(await t.text()).split("\n"),r=n.findIndex(e=>e.includes('"Description","Module code"'));if(-1===r)return console.error("Could not find header row in CSV:",e),[];let i=o(n[r]).map(e=>e.trim()),s=[];for(let e=r+1;e<n.length;e++){let t=n[e].trim();if(!t)continue;let r=o(t),l={};if(i.forEach((e,t)=>{l[e]=r[t]||""}),!l["Start date"]||!l["Start time"])continue;let c=a()("".concat(l["Start date"]," ").concat(l["Start time"]),"YYYY-MM-DD HH:mm").toDate(),d=a()("".concat(l["End date"]," ").concat(l["End time"]),"YYYY-MM-DD HH:mm").toDate();s.push({id:"".concat(l["Module code"],"-").concat(e),title:l.Description,start:c,end:d,location:l["Room(s)"],type:l.Type,moduleCode:l["Module code"]})}return s}catch(e){return console.error("Error fetching/parsing CSV:",e),[]}},s=["/data/specific/CompSci-Level4_timetable_2526.csv","/data/specific/CompSci-Level5_timetable_2526.csv","/data/specific/CompSci-Level6_timetable_2526.csv"],l={login:async e=>new Promise(t=>{setTimeout(()=>{t({username:e,token:"mock-token-123"})},500)}),getCourses:async e=>[],getModules:async(e,t)=>{let n=s.map(e=>i(e)),r=(await Promise.all(n)).flat(),a=new Map;return r.forEach(e=>{var t;a.has(e.moduleCode)||a.set(e.moduleCode,{id:e.moduleCode,name:e.title.split("(")[0].trim(),code:e.moduleCode,courseId:"unknown",schedule:[]}),null===(t=a.get(e.moduleCode))||void 0===t||t.schedule.push(e)}),Array.from(a.values())}}}},function(e){e.O(0,[990,250,971,23,744],function(){return e(e.s=6370)}),_N_E=e.O()}]);